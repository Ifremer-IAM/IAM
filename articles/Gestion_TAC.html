<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="IAM">
<title>Gestion avec TAC (fr) • IAM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Gestion avec TAC (fr)">
<meta property="og:description" content="IAM">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">IAM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-notices">Notices</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-notices">
    <a class="external-link dropdown-item" href="https://gitlab.ifremer.fr/iam/iam/-/raw/dev/inst/notice/Notice_IAM.pdf?inline=false">
      <span class="fa fa-download"></span>
       
      Notice pdf (fr)
    </a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/use_IAM.html">Utilisation IAM dans R (fr)</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://gitlab.ifremer.fr/iam/iam" aria-label="gitlab">
    <span class="fab fa fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="Gestion_TAC_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Gestion avec TAC (fr)</h1>
            
      
      <small class="dont-index">Source: <a href="https://gitlab.ifremer.fr/iam/iamvignettes/Gestion_TAC.Rmd" class="external-link"><code>vignettes/Gestion_TAC.Rmd</code></a></small>
      <div class="d-none name"><code>Gestion_TAC.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Dépendances pour l'analyse des données et les représentations graphiques.</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gitlab.ifremer.fr/iam/iam" class="external-link">IAM</a></span><span class="op">)</span></code></pre></div>
<p>Le modèle bio-économique IAM a été développé dans l’optique d’être utilisé pour des scénarios de gestion de quotas. Ainsi, des scénarios de Gestion par TAC peuvent être introduit à différentes échelles. Ce document traite de la gestion de TAC à un niveau interflotilles puis une autre partie détaillera la gestion intra flotilles.</p>
<p>L’ensemble de ces simulations sera réalisé avec le jeu de donnée example <code>Ifremer</code> composé de 7 flotilles et deux 3 espèces dynamiques dont une espèce à dynamique SS3.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gitlab.ifremer.fr/iam/iam" class="external-link">IAM</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="../reference/IAM_example.html">IAM_example</a></span><span class="op">(</span><span class="st">"IAM_SS3_1984.RData"</span><span class="op">)</span><span class="op">)</span>

<span class="va">IAM_input_1984</span> <span class="op">&lt;-</span> <span class="fu">IAM</span><span class="fu">::</span><span class="fu"><a href="../reference/IAM.input-methods.html">IAM.input</a></span><span class="op">(</span>
  fileIN <span class="op">=</span> <span class="fu"><a href="../reference/IAM_example.html">IAM_example</a></span><span class="op">(</span><span class="st">"inputFile.xlsx"</span><span class="op">)</span>,
  t_init <span class="op">=</span> <span class="fl">1984</span>, nbStep <span class="op">=</span> <span class="fl">12</span>, folderFleet <span class="op">=</span> <span class="fu"><a href="../reference/IAM_example.html">IAM_example</a></span><span class="op">(</span><span class="st">"fleets"</span><span class="op">)</span>,
  Fq_i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFq_i</span><span class="op">)</span>, iniFq_i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFq_i</span><span class="op">)</span>,
  Fq_fmi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFq_fmi</span><span class="op">)</span>, iniFq_fmi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFq_fmi</span><span class="op">)</span>,
  FqLwt_i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFqLwt_i</span><span class="op">)</span>, iniFqLwt_i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFqLwt_i</span><span class="op">)</span>,
  FqLwt_fmi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFqLwt_fmi</span><span class="op">)</span>, iniFqLwt_fmi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFqLwt_fmi</span><span class="op">)</span>,
  FqDwt_i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFqDwt_i</span><span class="op">)</span>, iniFqDwt_i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFqDwt_i</span><span class="op">)</span>,
  FqDwt_fmi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFqDwt_fmi</span><span class="op">)</span>, iniFqDwt_fmi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniFqDwt_fmi</span><span class="op">)</span>,
  Nt0s1q <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">Nt0s1q</span><span class="op">)</span>, Ni0q <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">Ni0q</span><span class="op">)</span>,
  iniNt0q <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">iniNt0q</span><span class="op">)</span>, matwt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DAR <span class="op">=</span> <span class="va">mat_morphage</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">IAM_input_1984</span><span class="op">)</span>
<span class="co">#&gt; My Input (IAM input) :</span>
<span class="co">#&gt; Simulation of 3 dynamic species, 19 static species and 7 fleet</span>
<span class="co">#&gt; Simulation start in 1984 and end in 1995 (12 steps)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ------------------------------------</span>
<span class="co">#&gt; Dynamic Species | Model |     Ages |</span>
<span class="co">#&gt;             ARC |   XSA | 0 to +gp |</span>
<span class="co">#&gt;             COR |   XSA | 2 to +gp |</span>
<span class="co">#&gt;             DAR |   SS3 | 0 to +gp |</span>
<span class="co">#&gt; ------------------------------------</span>
<span class="co">#&gt;                   Fleet |    nbv   |</span>
<span class="co">#&gt;                    Alis |    24    |</span>
<span class="co">#&gt;                   Antea |    36    |</span>
<span class="co">#&gt;                Atalante |    15    |</span>
<span class="co">#&gt;                Haliotis |     5    |</span>
<span class="co">#&gt;         Marion_Dufresne |     9    |</span>
<span class="co">#&gt;            Pourquoi_pas |    18    |</span>
<span class="co">#&gt;                Thalassa |    60    |</span></code></pre></div>
<p>L’objet argument est laissé tel quel lors de l’utilisation de l’interface et sera édité à la main plus tard pour chaque scénario.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">IAM_argum_1984</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IAM.args-methods.html">IAM.args</a></span><span class="op">(</span><span class="va">IAM_input_1984</span><span class="op">)</span></code></pre></div>
<p>Cela revient à initialiser un objet de classe <code>iamArgs</code> sans passer par l’interface avec la commande suivante :</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">IAM_argum_1984</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IAM.input2args.html">IAM.input2args</a></span><span class="op">(</span><span class="va">IAM_input_1984</span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="besoin-dun-scénario-statu-quo">Besoin d’un scénario <em>statu quo</em><a class="anchor" aria-label="anchor" href="#besoin-dun-sc%C3%A9nario-statu-quo"></a>
</h2>
<p>Afin de pouvoir comparer l’effet de chaque scénario, il nous faut un scénario de départ dans lequel aucune mesure de Gestion s’imposera.</p>
<p>Dans un premier temps il est utile de définir les dynamiques de recrutements ainsi que des éléments de paramétrage du module économique. On va pour cela éditer l’objet <code>IAM_argum_1984</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Module SR</span>
<span class="co"># TODO add boken stick Rec..where is the value ?</span>
<span class="co"># Add noise to COR</span>
<span class="va">IAM_argum_1984</span><span class="op">@</span><span class="va">arguments</span><span class="op">$</span><span class="va">Recruitment</span><span class="op">$</span><span class="va">COR</span><span class="op">$</span><span class="va">wnNOISEmodSR</span> <span class="op">&lt;-</span> <span class="fl">100</span>

<span class="co"># Module EcoDCF</span>
<span class="va">IAM_argum_1984</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IAM.editArgs_Eco.html">IAM.editArgs_Eco</a></span><span class="op">(</span><span class="va">IAM_argum_1984</span>, dr <span class="op">=</span> <span class="fl">0.04</span>, perscCalc <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="co"># Module Gestion</span>
<span class="va">mfm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">IAM_input_1984</span><span class="op">@</span><span class="va">input</span><span class="op">$</span><span class="va">Fleet</span>,<span class="op">{</span>
  <span class="op">(</span><span class="va">effort1_f_m</span> <span class="op">*</span> <span class="va">effort2_f_m</span> <span class="op">*</span> <span class="va">nbv_f_m</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">effort1_f</span> <span class="op">*</span> <span class="va">effort2_f</span> <span class="op">*</span> <span class="va">nbv_f</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">mfm</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">mfm</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span>

<span class="va">IAM_argum_1984</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IAM.editArgs_Gest.html">IAM.editArgs_Gest</a></span><span class="op">(</span><span class="va">IAM_argum_1984</span>, active <span class="op">=</span> <span class="cn">FALSE</span>, 
                                    delay <span class="op">=</span> <span class="fl">1</span>, mfm <span class="op">=</span> <span class="va">mfm</span><span class="op">)</span>

<span class="co"># Module Scenario</span>
<span class="va">IAM_argum_1984</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IAM.editArgs_Scenar.html">IAM.editArgs_Scenar</a></span><span class="op">(</span><span class="va">IAM_argum_1984</span><span class="op">)</span> <span class="co"># desactivate scenario</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">IAM_argum_1984</span><span class="op">)</span>
<span class="co">#&gt; My Input (IAM argument) :</span>
<span class="co">#&gt; Simulation of 3 dynamic species, 19 static species and 7 fleet</span>
<span class="co">#&gt; Simulation start in 1984 and end in 1995 (12 steps)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; =======================================================================================</span>
<span class="co">#&gt;   SR module  |               Stock Recruitment             |      Noise       | Proba |</span>
<span class="co">#&gt; ---------------------------------------------------------------------------------------</span>
<span class="co">#&gt;     Species  |    function  :  param A ; param B ; param C |  Type :    sd    |  Type |</span>
<span class="co">#&gt;    ARC (XSA) |          Mean 3.641e+07  0.00e+00  0.00e+00 |  Norm | 0.00e+00 |   .   |</span>
<span class="co">#&gt;    COR (XSA) |          Mean 1.893e+07  0.00e+00  0.00e+00 |  Norm | 1.00e+02 |   .   |</span>
<span class="co">#&gt;    DAR (SS3) | not activated 0.000e+00  0.00e+00  0.00e+00 |  Norm | 0.00e+00 |   .   |</span>
<span class="co">#&gt; ---------------------------------------------------------------------------------------</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  The Gestion module is not active.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ============================================================</span>
<span class="co">#&gt; Economic : PerscCalc = 1 ; dr = 0.040 | No replicates      |</span>
<span class="co">#&gt; ------------------------------------------------------------</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  The Scenario module is not active.</span></code></pre></div>
<p>Je choisis de simuler tout mes scénarios avec des réplicats, qui est fixé ici par <code>N</code></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">N</span> <span class="op">=</span> <span class="fl">10</span>

<span class="va">sim_statu_quo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="va">N</span>, <span class="op">{</span>
  <span class="fu">IAM</span><span class="fu">::</span><span class="fu"><a href="../reference/IAM.model-methods.html">IAM.model</a></span><span class="op">(</span>objArgs <span class="op">=</span> <span class="va">IAM_argum_1984</span>,  objInput <span class="op">=</span> <span class="va">IAM_input_1984</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="va">Fbar_sq_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span>,  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/IAM.format-method.html">IAM.format</a></span><span class="op">(</span><span class="va">sim_statu_quo</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>, name <span class="op">=</span> <span class="st">"Fbar"</span>, sim_name <span class="op">=</span> <span class="st">"SQ"</span>, n <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">Fbar_sq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>,<span class="va">Fbar_sq_l</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"COR"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/IAM.format_quant.html">IAM.format_quant</a></span><span class="op">(</span><span class="va">.</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.025</span>, <span class="fl">.975</span><span class="op">)</span><span class="op">)</span>


<span class="va">Fbar_sq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">median</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">quant1</span>, ymax <span class="op">=</span> <span class="va">quant2</span><span class="op">)</span>, fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">value</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="st">"dotted"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="cn">NULL</span></code></pre></div>
<p><img src="Gestion_TAC_files/figure-html/statuquo-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="gestion-tac-générale">Gestion TAC générale<a class="anchor" aria-label="anchor" href="#gestion-tac-g%C3%A9n%C3%A9rale"></a>
</h2>
<p>Les différentes options de réglages du module Gestion sont exposées dans la vignette “Utilisation IAM dans R”. Il s’agit ici de les explorer plus en avant et de les utiliser.</p>
<p>On fixe ici un scénario de Gestion qui va agir sur le nombre de navire afin d’atteindre un TAC (<em>Total allowable catches</em>) donné pour chaque année. Ce quotas vise particulièrement l’espèce dite “COR” et rentre en application 2 ans après le début de la simulation, soit en 1986. Les modification d’efforts seront multiplicatives.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">IAM_argum_1984_TACnbv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IAM.editArgs_Gest.html">IAM.editArgs_Gest</a></span><span class="op">(</span>
  <span class="va">IAM_argum_1984</span>, active <span class="op">=</span> <span class="cn">TRUE</span>, control <span class="op">=</span> <span class="st">"Nb vessels"</span>, target <span class="op">=</span> <span class="st">"TAC"</span>,
  espece <span class="op">=</span> <span class="st">"COR"</span>, delay <span class="op">=</span> <span class="fl">2</span>, type <span class="op">=</span> <span class="st">"x"</span>, bounds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="op">-</span><span class="fl">100</span><span class="op">)</span>, <span class="co"># X2 a -100 entraine des flottes a 0 navires !</span>
  tac <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">3200</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
      <span class="co">#   84, 85, 1986:1995</span>

<span class="va">sim_TACglob_nbv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="va">N</span>, <span class="op">{</span>
  <span class="fu">IAM</span><span class="fu">::</span><span class="fu"><a href="../reference/IAM.model-methods.html">IAM.model</a></span><span class="op">(</span>objArgs <span class="op">=</span> <span class="va">IAM_argum_1984_TACnbv</span>,  objInput <span class="op">=</span> <span class="va">IAM_input_1984</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>Cette simulation permet de diminuer drastiquement la mortalite par pêche de l’espèce dite “COR” avec une reduction immédiate la taille des flottilles.</p>
<p>Une autre variable d’ajustement de l’effort est le nombre voyage en mer des navires.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">IAM_argum_1984_TACnbds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IAM.editArgs_Gest.html">IAM.editArgs_Gest</a></span><span class="op">(</span>
  <span class="va">IAM_argum_1984_TACnbv</span>, active <span class="op">=</span> <span class="cn">TRUE</span>, control <span class="op">=</span> <span class="st">"Nb trips"</span>
<span class="op">)</span>

<span class="va">sim_TACglob_nbt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="va">N</span>, <span class="op">{</span>
  <span class="fu">IAM</span><span class="fu">::</span><span class="fu"><a href="../reference/IAM.model-methods.html">IAM.model</a></span><span class="op">(</span>objArgs <span class="op">=</span> <span class="va">IAM_argum_1984_TACnbds</span>,  objInput <span class="op">=</span> <span class="va">IAM_input_1984</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="représentations-graphiques">Représentations graphiques<a class="anchor" aria-label="anchor" href="#repr%C3%A9sentations-graphiques"></a>
</h3>
<p>On peut aisement comparer les différents scénarios avec des fonctions graphiques. Ainsi on observe que nos scénarios de TAC arrivent tout deux à la reconstruction progressive du stock “COR” par une baisse de la mortalité par pêche (Fbar).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">TACglobv_nbv_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span>,  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/IAM.format-method.html">IAM.format</a></span><span class="op">(</span><span class="va">sim_TACglob_nbv</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>, name <span class="op">=</span> <span class="st">"summary"</span>,
             sim_name <span class="op">=</span> <span class="st">"TAC global nbv"</span>, n <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="va">TACglobv_nbt_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span>,  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/IAM.format-method.html">IAM.format</a></span><span class="op">(</span><span class="va">sim_TACglob_nbt</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>, name <span class="op">=</span> <span class="st">"summary"</span>, 
             sim_name <span class="op">=</span> <span class="st">"TAC global nbtrip"</span>, n <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="va">Statuquo_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span>,  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/IAM.format-method.html">IAM.format</a></span><span class="op">(</span><span class="va">sim_statu_quo</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>, name <span class="op">=</span> <span class="st">"summary"</span>, 
             sim_name <span class="op">=</span> <span class="st">"Statu quo"</span>, n <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="va">COR</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Statuquo_l</span>, <span class="va">TACglobv_nbt_l</span>, <span class="va">TACglobv_nbv_l</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"COR"</span>, <span class="va">variable</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fbar"</span>, <span class="st">"SSB"</span>, <span class="st">"L_et"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/IAM.format_quant.html">IAM.format_quant</a></span><span class="op">(</span><span class="va">.</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.025</span>, <span class="fl">.975</span><span class="op">)</span><span class="op">)</span>
  

<span class="va">COR</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">~</span> <span class="va">sim_name</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">quant1</span>, ymax <span class="op">=</span> <span class="va">quant2</span><span class="op">)</span>, fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept<span class="op">=</span><span class="fl">1986</span>, linetype <span class="op">=</span> <span class="st">"dotted"</span><span class="op">)</span> <span class="op">+</span>
  <span class="cn">NULL</span></code></pre></div>
<p><img src="Gestion_TAC_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
<p>Cependant, ces scénarios entrainent de fortes réductions d’effort car ils ne ciblent pas les métiers et flottilles impactant le plus le stock cible. Ainsi on observe que les variables ajustées lors des scénarios arrivent vite proche de valeurs nulles.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nbv_f"</span>, <span class="st">"effort1_f"</span><span class="op">)</span>

<span class="va">TACglobv_nbv_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span>,  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/IAM.format-method.html">IAM.format</a></span><span class="op">(</span><span class="va">sim_TACglob_nbv</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>, name <span class="op">=</span> <span class="va">variables</span>,
             sim_name <span class="op">=</span> <span class="st">"TAC global nbv"</span>, n <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="va">TACglobv_nbt_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span>,  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/IAM.format-method.html">IAM.format</a></span><span class="op">(</span><span class="va">sim_TACglob_nbt</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>, name <span class="op">=</span> <span class="va">variables</span>, 
             sim_name <span class="op">=</span> <span class="st">"TAC global nbtrip"</span>, n <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="va">TACglob_effort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">TACglobv_nbv_l</span>, <span class="va">TACglobv_nbt_l</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/IAM.format_quant.html">IAM.format_quant</a></span><span class="op">(</span><span class="va">.</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.025</span>, <span class="fl">.975</span><span class="op">)</span><span class="op">)</span>

<span class="va">TACglob_effort</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">value</span>, color <span class="op">=</span> <span class="va">fleet</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">~</span> <span class="va">sim_name</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept<span class="op">=</span><span class="fl">1986</span>, linetype <span class="op">=</span> <span class="st">"dotted"</span><span class="op">)</span> <span class="op">+</span>
  <span class="cn">NULL</span></code></pre></div>
<p><img src="Gestion_TAC_files/figure-html/TACglob_plot-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="pondérer-les-efforts-avec-la-matrice-mfm">Pondérer les efforts avec la matrice mfm<a class="anchor" aria-label="anchor" href="#pond%C3%A9rer-les-efforts-avec-la-matrice-mfm"></a>
</h3>
<p>Ces réductions drastiques peuvent être limitées en ciblant les flottilles et les métiers. Par exemple, l’espèce ciblé est pêchées à 97.0259956 % par la flottille dite “Thalassa”, via le métier “Filet_COR”. Il serait donc plus intéressant de diminuer l’effort sur cette flottille uniquement.</p>
<p>Pour cela on peut agir sur la pondération des métiers et indiquer que l’on diminiue l’effort des métiers “Filet_COR” pour les flottilles qui l’utilisent au profit du méthier “Filet_DP”. Il s’agit d’un <strong>report d’effort</strong> par métier.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trg_f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Thalassa"</span>, <span class="st">"Haliotis"</span><span class="op">)</span>

<span class="va">mfm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">IAM_input_1984</span><span class="op">@</span><span class="va">input</span><span class="op">$</span><span class="va">Fleet</span>,<span class="op">{</span>
  <span class="op">(</span><span class="va">effort1_f_m</span> <span class="op">*</span> <span class="va">effort2_f_m</span> <span class="op">*</span> <span class="va">nbv_f_m</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">effort1_f</span> <span class="op">*</span> <span class="va">effort2_f</span> <span class="op">*</span> <span class="va">nbv_f</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">mfm</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">mfm</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span> <span class="co">#report d'effort du m?tier 'Filet_COR' vers 'Filet_DP'</span>
<span class="va">mfm</span><span class="op">[</span><span class="va">trg_f</span>,<span class="st">"Filet_DP"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">IAM_input_1984</span><span class="op">@</span><span class="va">input</span><span class="op">$</span><span class="va">Fleet</span>, 
     <span class="va">Lref_f_m</span><span class="op">[</span><span class="va">trg_f</span>,<span class="st">"Filet_DP"</span><span class="op">]</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Lref_f_m</span><span class="op">[</span><span class="va">trg_f</span>,<span class="st">"Filet_DP"</span><span class="op">]</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">mfm</span><span class="op">[</span><span class="va">trg_f</span>,<span class="st">"Filet_COR"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">IAM_input_1984</span><span class="op">@</span><span class="va">input</span><span class="op">$</span><span class="va">Fleet</span>, 
    <span class="op">-</span> <span class="va">Lref_f_m</span><span class="op">[</span><span class="va">trg_f</span>,<span class="st">"Filet_DP"</span><span class="op">]</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Lref_f_m</span><span class="op">[</span><span class="va">trg_f</span>,<span class="st">"Filet_DP"</span><span class="op">]</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">mfm</span>
<span class="co">#&gt;                 Filet_DAR   Filet_DP Chalut_fond_DP Chalut_fond_GLY</span>
<span class="co">#&gt; Alis                    0 0.00000000             NA              NA</span>
<span class="co">#&gt; Antea                  NA         NA              0               0</span>
<span class="co">#&gt; Atalante               NA         NA              0              NA</span>
<span class="co">#&gt; Haliotis               NA 0.05556576             NA              NA</span>
<span class="co">#&gt; Marion_Dufresne        NA         NA             NA              NA</span>
<span class="co">#&gt; Pourquoi_pas           NA         NA             NA              NA</span>
<span class="co">#&gt; Thalassa                0 0.94443424             NA              NA</span>
<span class="co">#&gt;                 Chalut_fond_CEP Chalut_pelagique_DP Chalut_fond_COR Autres</span>
<span class="co">#&gt; Alis                         NA                  NA              NA     NA</span>
<span class="co">#&gt; Antea                        NA                  NA              NA     NA</span>
<span class="co">#&gt; Atalante                      0                   0               0      0</span>
<span class="co">#&gt; Haliotis                     NA                  NA              NA      0</span>
<span class="co">#&gt; Marion_Dufresne              NA                  NA              NA     NA</span>
<span class="co">#&gt; Pourquoi_pas                 NA                  NA              NA     NA</span>
<span class="co">#&gt; Thalassa                     NA                  NA              NA      0</span>
<span class="co">#&gt;                   Filet_COR Palangre_DP Palangre_DAR</span>
<span class="co">#&gt; Alis                     NA          NA           NA</span>
<span class="co">#&gt; Antea                    NA          NA           NA</span>
<span class="co">#&gt; Atalante                 NA          NA           NA</span>
<span class="co">#&gt; Haliotis        -0.05556576           0           NA</span>
<span class="co">#&gt; Marion_Dufresne          NA          NA            0</span>
<span class="co">#&gt; Pourquoi_pas             NA           0            0</span>
<span class="co">#&gt; Thalassa        -0.94443424          NA           NA</span>
<span class="co">#&gt; attr(,"DimCst")</span>
<span class="co">#&gt; [1]  7 11  0  0</span>

<span class="va">IAM_argum_1984_TACnbvR</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IAM.editArgs_Gest.html">IAM.editArgs_Gest</a></span><span class="op">(</span><span class="va">IAM_argum_1984_TACnbv</span>,  mfm <span class="op">=</span> <span class="va">mfm</span><span class="op">)</span>

<span class="va">sim_TACglob_nbvR</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="va">N</span>, <span class="op">{</span>
  <span class="va">sim_TACreport</span> <span class="op">&lt;-</span> <span class="fu">IAM</span><span class="fu">::</span><span class="fu"><a href="../reference/IAM.model-methods.html">IAM.model</a></span><span class="op">(</span>objArgs <span class="op">=</span> <span class="va">IAM_argum_1984_TACnbvR</span>, objInput <span class="op">=</span> <span class="va">IAM_input_1984</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>Il est tout à fait possible de rajouter aux précédents scénrarios déjà simuler pour avoir un moyen de comparaison. Il faut cependant éviter de rajouter les objets à la suite avec rbind comme cela, car R utilise beaucoup plus de mémoire pour cela. On remarque ainsi qu’on obtient une plus faible réduction d’effort sur le nombre de navire pour les mêmes résultats au niveau du stock.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nbv_f"</span>, <span class="st">"effort1_f"</span><span class="op">)</span>
<span class="co"># Extraction des variables.</span>
<span class="va">TACglob_nbvR_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span>,  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/IAM.format-method.html">IAM.format</a></span><span class="op">(</span><span class="va">sim_TACglob_nbvR</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>, name <span class="op">=</span> <span class="va">variables</span>,
             sim_name <span class="op">=</span> <span class="st">"Report TAC global nbv"</span>, n <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="co"># Calcul des quantiles et ajout aux simulations précédentes.</span>
<span class="va">TACglob_effort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">TACglob_nbvR_l</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/IAM.format_quant.html">IAM.format_quant</a></span><span class="op">(</span><span class="va">.</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.025</span>, <span class="fl">.975</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">TACglob_effort</span><span class="op">)</span>

<span class="va">TACglob_effort</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">value</span>, color <span class="op">=</span> <span class="va">fleet</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">~</span> <span class="va">sim_name</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept<span class="op">=</span><span class="fl">1986</span>, linetype <span class="op">=</span> <span class="st">"dotted"</span><span class="op">)</span> <span class="op">+</span>
  <span class="cn">NULL</span></code></pre></div>
<p><img src="Gestion_TAC_files/figure-html/TACreport-1.png" width="672"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="va">TACglobv_nbvR_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span>,  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/IAM.format-method.html">IAM.format</a></span><span class="op">(</span><span class="va">sim_TACglob_nbvR</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>, name <span class="op">=</span> <span class="st">"summary"</span>,
             sim_name <span class="op">=</span> <span class="st">"Report TAC global nbv"</span>, n <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="va">COR</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">TACglobv_nbvR_l</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="st">"COR"</span>, <span class="va">variable</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fbar"</span>, <span class="st">"SSB"</span>, <span class="st">"L_et"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="../reference/IAM.format_quant.html">IAM.format_quant</a></span><span class="op">(</span><span class="va">.</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.025</span>, <span class="fl">.975</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">COR</span><span class="op">)</span>
  

<span class="va">COR</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sim_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">sim_name</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="co"># Reorder the column in plot</span>
    <span class="st">"Statu quo"</span>, <span class="st">"TAC global nbtrip"</span>,            <span class="co"># by setting level order</span>
    <span class="st">"TAC global nbv"</span>, <span class="st">"Report TAC global nbv"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">variable</span> <span class="op">~</span> <span class="va">sim_name</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">quant1</span>, ymax <span class="op">=</span> <span class="va">quant2</span><span class="op">)</span>, fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept<span class="op">=</span><span class="fl">1986</span>, linetype <span class="op">=</span> <span class="st">"dotted"</span><span class="op">)</span> <span class="op">+</span>
  <span class="cn">NULL</span></code></pre></div>
<p><img src="Gestion_TAC_files/figure-html/TACreport-2.png" width="672"></p>
<!-- ## Gestion TAC par flotille -->
<!-- ## References -->
<!-- <div id="refs"></div> -->
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://gowachin.github.io/" class="external-link">Maxime Jaunatre</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
